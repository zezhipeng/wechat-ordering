<template lang="jade">
.recommend-main
  .item-title(style='margin-top: 60px; display: flex; align-items: center')
    svg(width='36px', height='37px', viewbox='0 0 36 37', version='1.1', xmlns='http://www.w3.org/2000/svg', xmlns:xlink='http://www.w3.org/1999/xlink')
      // Generator: Sketch 40 (33762) - http://www.bohemiancoding.com/sketch
      title chef
      desc Created with Sketch.
      defs
      g#Page-1(stroke='none', stroke-width='1', fill='none', fill-rule='evenodd')
        g#iPhone-7(transform='translate(-24.000000, -77.000000)')
          g#Group-5(transform='translate(19.000000, 77.000000)')
            g#chef(transform='translate(5.000000, 0.000000)')
              g#Layer_1
                ellipse#bg_10_(fill='#f9a825', cx='17.9278822', cy='18.3458333', rx='17.9278822', ry='18.3458333')
                path#Shape(d='M17.8825022,18.8770742 L12.2236643,18.8770742 C12.2236643,18.8770742 12.3493695,22.476369 12.470943,24.9912531 C12.5128914,25.8105809 12.9038733,28.1185728 13.881153,29.6434268 C13.9887903,29.7962849 14.0985986,29.9472797 14.2083369,30.0948347 C14.208757,30.095408 14.2091772,30.0959813 14.2098075,30.0966979 L14.2098075,30.0966979 C14.7514957,30.8245115 15.5132206,31.5010858 15.8378833,31.7240306 C16.7828788,32.3729428 17.4768139,32.2974813 17.8824322,32.2974813 C18.2877704,32.2974813 19.1224674,32.2991295 19.9273313,31.7240306 C20.2475821,31.4949227 21.0135088,30.8245115 21.555267,30.0966979 L21.555267,30.0966979 C21.5556872,30.0959096 21.5563175,30.0953363 21.5567377,30.0948347 C21.6664059,29.9472797 21.7763542,29.7962849 21.8837114,29.6434268 C22.8614813,28.1185728 23.2521831,25.8105809 23.2941315,24.9912531 C23.415705,22.476369 23.5412002,18.8770742 23.5412002,18.8770742 L17.8825022,18.8770742 L17.8825022,18.8770742 Z', fill='#E8CAA8')
                path#Shape(d='M18.5240543,14.4631097 C13.0158526,14.4631097 11.9100664,17.347562 12.0601424,21.4225586 C12.1121052,22.8387709 12.4773858,25.1220389 12.4773858,25.1220389 C12.4219214,23.9944868 12.3654066,22.6252856 12.3199566,21.4563837 L12.3206569,21.4602535 C12.3206569,21.0273349 12.5180737,20.6155569 13.0064684,20.6328994 C13.2174712,20.6757542 14.7163402,22.293914 15.9126062,22.8588367 C15.7102872,22.4257747 15.8352221,21.8796278 15.8352221,21.8796278 C16.0784391,22.4257747 18.2320259,23.4776502 18.2320259,23.4776502 C18.7655905,23.2734812 19.9831458,22.1515188 20.5327475,21.6723772 C20.458935,21.9549461 19.8146517,22.6328103 19.8146517,22.6328103 C20.2744039,22.425918 21.7807662,20.9757372 22.3620917,20.7397496 C22.5328968,20.6769724 22.6638544,20.6362676 22.7595865,20.6329711 C23.2454601,20.6156286 23.4432971,21.0229634 23.4456081,21.4531589 C23.3999481,22.6227057 23.3432231,23.9935551 23.2879688,25.1221105 C23.5412702,23.7190843 23.690856,22.2556457 23.7598363,21.3968314 C24.1634938,16.3909988 21.8774086,14.4631097 18.5240543,14.4631097 L18.5240543,14.4631097 Z', fill='#442404')
                polygon#Shape(fill='#FFFFFF', points='10.7546284 8.29718978 12.052509 20.5451118 23.8029752 20.5451118 25.1005758 8.29718978')
                path#Shape(d='M25.1005758,8.29718978 C25.1005758,7.25577708 24.3196624,6.40226585 23.3250151,6.31347489 C22.8389314,5.83196842 22.1781209,5.53456527 21.4485401,5.53456527 C21.2733231,5.53456527 21.1023779,5.55305443 20.9363349,5.58566128 C20.2426099,4.850538 19.2711428,4.39182051 18.193509,4.39182051 C17.0877228,4.39182051 16.0949663,4.87590685 15.3978799,5.64464027 C15.1599152,5.5742668 14.909135,5.53456527 14.6486905,5.53456527 C13.9217709,5.53456527 13.2630613,5.83017684 12.7778179,6.30860177 C12.7521866,6.30752682 12.7273257,6.30466029 12.7016944,6.30466029 C11.6263717,6.30466029 10.7545584,7.19665477 10.7545584,8.29718978 C10.7545584,9.3975098 11.6263016,10.2897909 12.7016944,10.2897909 C12.7273257,10.2897909 12.7521866,10.2869244 12.7778179,10.2857778 C13.2630613,10.7642027 13.9217709,11.0598143 14.6486905,11.0598143 C14.909135,11.0598143 15.1599853,11.0200411 15.3978799,10.9496676 C16.0949663,11.7185444 17.0877228,12.2024874 18.193509,12.2024874 C19.2711428,12.2024874 20.2426099,11.7436982 20.9363349,11.0086466 C21.1023079,11.0413251 21.273253,11.0598143 21.4485401,11.0598143 C22.1781209,11.0598143 22.8388614,10.7623395 23.3250151,10.2809047 C24.3196624,10.1921854 25.1005758,9.33845915 25.1005758,8.29718978 L25.1005758,8.29718978 Z', fill='#FFFFFF')
                path#Shape(d='M11.5987095,9.93921353 L11.7410821,10.0060755 C11.7891232,10.0267146 11.8349234,10.05452 11.8847853,10.0692826 L12.0312197,10.1143589 C12.0799611,10.1281183 12.1256912,10.148399 12.1773739,10.1523405 C12.2789186,10.1620867 12.375421,10.1934036 12.4764054,10.1896771 L12.6259211,10.1903938 C12.6766234,10.1927587 12.7227037,10.1903938 12.7759271,10.1817225 L12.8028189,10.177351 L12.8486891,10.2108179 C12.9414098,10.2789698 13.0234159,10.3588745 13.1218092,10.4167785 C13.2143899,10.4827088 13.3138336,10.5360981 13.4139076,10.5872658 C13.4622989,10.6157878 13.5160825,10.633417 13.5667848,10.6567793 C13.6187476,10.67706 13.6675591,10.7049371 13.7217629,10.7191981 L13.8804527,10.7699358 C13.9327657,10.78821 13.9884402,10.7946597 14.0420838,10.8076307 C14.1490208,10.8363678 14.2599495,10.8405243 14.3686373,10.8563619 C14.4228412,10.8638865 14.4783055,10.86059 14.5329296,10.8633132 L14.6153558,10.8655348 L14.6358048,10.8660364 L14.6460293,10.8663947 L14.6487605,10.8664664 C14.6518418,10.8663947 14.6231292,10.8674697 14.6355947,10.8669681 L14.636225,10.8669681 L14.6376256,10.8667531 L14.643018,10.8661798 L14.6870673,10.8618083 L14.8630547,10.8443941 C14.9203399,10.8372994 14.9829474,10.8356511 15.0361708,10.824185 C15.1381357,10.7973112 15.23898,10.7698641 15.3411549,10.7480785 L15.4621681,10.722208 L15.548446,10.8070574 L15.8132325,11.066694 L16.1018294,11.2978085 L16.4106651,11.4989677 L16.735538,11.6713898 L17.0760277,11.8092702 L17.4286327,11.9116056 L17.7897815,11.9808325 L18.1567428,12.0118627 C18.1986913,12.0190291 18.2795768,12.0104294 18.339173,12.0108594 L18.5330883,12.0082795 C18.659914,12.0036214 18.7739242,11.9818357 18.896408,11.9701546 C19.0173512,11.9548186 19.1376641,11.9169804 19.260218,11.895123 C19.3817914,11.8671026 19.4985327,11.8213814 19.6193359,11.7854063 C19.7375478,11.7435549 19.8501573,11.6864392 19.9683693,11.6400013 C20.0828697,11.5860387 20.1920477,11.5204667 20.3054975,11.4606994 C20.4141853,11.3939091 20.5198618,11.3205974 20.6286896,11.2498657 L20.936475,11.0090049 C20.8509674,11.1080438 20.7674206,11.2111674 20.6777112,11.309203 C20.5807886,11.3979939 20.4861069,11.4923746 20.3845623,11.5784424 C20.2771351,11.6560539 20.1725091,11.7401151 20.06088,11.8132834 C19.9459595,11.8803604 19.8323695,11.9530271 19.7118465,12.0110744 C19.5892927,12.0634604 19.4686996,12.1258792 19.342224,12.1703105 C19.2139276,12.2108003 19.0878022,12.2567366 18.9543235,12.2864052 C18.8211249,12.3109141 18.6814135,12.3453842 18.5508761,12.3604335 C18.4171873,12.3710397 18.3047879,12.388024 18.1531712,12.3895289 C18.0178017,12.3847991 17.8820821,12.3830075 17.7465725,12.3746946 L17.3426349,12.3170772 L16.9473111,12.211517 L16.5646628,12.0638187 L16.1986819,11.8769205 C16.0823608,11.8043971 15.9698913,11.7251374 15.8556711,11.6491742 L15.5379414,11.3863128 L15.2475938,11.0927078 L15.4548849,11.1514718 C15.3268686,11.1809255 15.1975918,11.204861 15.0695755,11.2291549 C15.0068279,11.2386145 14.9507333,11.2368946 14.891067,11.241266 L14.7145894,11.2503673 L14.6704,11.2525889 L14.6649376,11.2528755 L14.6483403,11.2534488 L14.645399,11.2533055 L14.6337039,11.2524455 L14.6101735,11.2507973 L14.5158421,11.2439893 C14.4530945,11.2380412 14.3901368,11.2378979 14.3279494,11.2267184 C14.2039249,11.2047177 14.0798304,11.1850103 13.9603578,11.1446638 C13.9005515,11.125243 13.8389945,11.1123436 13.7812191,11.0872614 L13.6073326,11.0161713 C13.5485068,10.9950306 13.4953534,10.9602021 13.4392587,10.9327551 C13.3844946,10.9028714 13.3276997,10.8768576 13.2770674,10.8392343 C13.1726515,10.7706524 13.0702665,10.700064 12.9768454,10.6172211 C12.878032,10.5419028 12.7947654,10.4478088 12.7071568,10.3609527 L12.7799889,10.390048 C12.7290765,10.3914813 12.6715112,10.3866799 12.6185679,10.3767903 L12.4569368,10.3531414 C12.3492995,10.3416036 12.2477549,10.2948074 12.1453698,10.2650671 C12.0936871,10.2519527 12.0459261,10.2217107 11.9976049,10.1984917 L11.8543219,10.1248934 C11.8076113,10.0998112 11.7686042,10.0636929 11.7254652,10.0336659 L11.5987095,9.93921353 L11.5987095,9.93921353 Z', fill='#DDDDDD')
                path#Shape(d='M17.9276721,28.2509351 L14.8241176,28.2509351 L14.8241176,28.3312698 C15.5701556,30.3199294 17.9276721,30.1591167 17.9276721,30.1591167 C17.9276721,30.1591167 20.2851886,30.3199294 21.0310866,28.3312698 L21.0310866,28.2509351 L17.9276721,28.2509351 L17.9276721,28.2509351 Z', fill='#FFFFFF')
    span(style='margin-left: 14px;') 特色推荐
  .swiper-content
    swiper(:options='options')
      swiper-slide(v-for='item, $index in list', v-if='item.recommend')
        .recommend-content
          .img
            img.img-responsive(:src='"//og2h60o77.bkt.clouddn.com/" + item.src + "?imageMogr2/thumbnail/330x220"')
          .footer
            br
            .line1
              .name {{item.name}}
                span(style='margin-left: 14px;')
                span.icon(v-for='i in item.stars') star_border
              .price {{item.price}} /{{item.unit}}
            .line2
              p {{item.recommendVt}}
        //- .footer
        //-   p {{item.vt}}
        //-   .tools
        //-     svg(fill='none', height='24', viewbox='0 0 24 24', width='24', xmlns='http://www.w3.org/2000/svg')
        //-       path(d='M0 0h24v24H0z', fill='none')
        //-       path(stroke='#979797', stroke-width='1', d='M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-1.91l-.01-.01L23 10z')
        //-     span.thumb-number 55
        //-     .svg(style='height: 24px; width: 24px', @click='add({item: item, $index: $index}, $event)')
        //-       svg(style='margin-left: 25px' fill='none', height='24', viewbox='0 0 24 24', width='24', xmlns='http://www.w3.org/2000/svg')
        //-         path(stroke='#979797', stroke-width='1', d='M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4v2z')
        //-         path(d='M0 0h24v24H0z', fill='none')
</template>

<script>
import { swiper, swiperSlide, swiperPlugins } from 'vue-awesome-swiper'
import TWEEN from 'tween'

export default {
  data () {
    return {
      options: {
        autoHeight: true,
      }
    }
  },
  computed: {
    order () {
      return this.$store.getters.order
    },
    list () {
      return this.$store.getters.list
    }
  },
  mounted () {

  },
  methods: {
    tween: function (startValue, endValue, el) {

      function animate () {
        requestAnimationFrame(animate)
        TWEEN.update()
      }
      new TWEEN.Tween(startValue)
        .to(endValue, 500)
        .onUpdate(function () {

          el.style.top = this.top + 'px'
          el.style.left = this.left + 'px'
          el.style.transform = `scale(${this.scale})`
        })
        .start()
      animate()
    },
    add(data, e) {
      let item = data.item
      let $index = data.$index
      let ball = document.createElement('SPAN')
      let order = $('#order')
      let top = order.offset().top
      let left = order.offset().left
      let width = order.width()
      let height = order.height()
      let vm = this

      top = top + height / 2 - 35
      left = left + width / 2 - 6

      $(ball).addClass('ball icon')
      $(ball).text('plus_one')
      $(ball).css('top', e.clientY - 10 + 'px')
      $(ball).css('left', e.clientX - 10 + 'px')
      $('body').append(ball)

      this.tween({
        top: e.clientY - 10,
        left: e.clientX - 10,
        scale: 1
      }, {
        top: 1,
        left: $('body').width() / 2 - 3,
        scale: 0.5
      }, ball)

      this.$store.commit('addOrder', {item})
      setTimeout(function() {
        $(ball).remove()
      }, 600)
    }
  },
  components: {
    swiper,
    swiperSlide
  }
}
</script>

<style lang="less">
.item-title {
  font-size: 20px;
  padding: 5px 5px 8px 0;
  color: #666;
}
.recommend-content {
  width: 100%;

  .img {
    width: 100%;
    padding: 8px;
    box-shadow: 0 1px 2px rgba(0,0,0,0.07);
    background: #fff;
  }
  .footer {
    .line1 {
      display: flex;
      justify-content: space-between;
      align-items: center;

      .name {
        font-size: 20px;
        color: #666;

        span {
          color: #F9A825;
          font-size: 14px;
        }
      }
      .price {
        color: #F9A825;
        font-size: 20px;
      }
    }
  }
  .line2 {
    p {
      font-size: 14px;
      color: #777;
      line-height: 34px;
    }
  }

}
</style>
